(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4170:function(e,t,n){Promise.resolve().then(n.bind(n,6947))},6947:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n(7437),s=n(2265),o=n(2307),l=n(994),c=n(2601);let r=c.env.API_KEY_DB,i=c.env.AUTH_DOMAIN,d=c.env.PROJ_ID,u=c.env.STOR_BUCKET,_=c.env.APP_ID,h=c.env.DB_URL,m=(0,l.ZF)({apiKey:"".concat(r),databaseURL:"".concat(h),authDomain:"".concat(i),projectId:"".concat(d),storageBucket:"".concat(u),messagingSenderId:"764142243987",appId:"".concat(_),measurementId:"G-XGXB7RDJR2"}),v=(0,o.N8)(m);var j=e=>{let{currentIndex:t,pointsData:n}=e,[o,l]=(0,s.useState)(null);return(0,s.useEffect)(()=>{if(null!==t&&t>=0&&n&&Object.values(n)[t]){let{lat:e,lng:a}=Object.values(n)[t];l({lat:e,lng:a})}},[t,n]),(0,s.useEffect)(()=>{o&&new google.maps.StreetViewPanorama(document.getElementById("pano"),{position:o,pov:{heading:34,pitch:10},addressControl:!1,fullscreenControl:!1,showRoadLabels:!1})},[o]),(0,a.jsx)("div",{id:"pano",style:{height:"700px",width:"85%",margin:"10px",border:"1px"}})},p=n(1309),x=n.n(p),f=()=>{let[e,t]=(0,s.useState)(""),[n,l]=(0,s.useState)(""),[c,r]=(0,s.useState)({}),[i,d]=(0,s.useState)(0),[u,_]=(0,s.useState)(!1),[h,m]=(0,s.useState)(""),[p,f]=(0,s.useState)(0),[b,y]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=async()=>{try{let e=(0,o.iH)(v,"points"),t=await (0,o.U2)(e);t.exists()?r(t.val()):console.log("No data available")}catch(e){console.error("Error fetching points data:",e)}};e()},[]);let g=async()=>{try{let t=Object.keys(c).find(t=>t.toLowerCase().includes(e.toLowerCase()));if(t){let{lat:e,lng:n,text:a}=c[t];e===Object.values(c)[i].lat&&n===Object.values(c)[i].lng?(l("Правильно, это ".concat(t,"!")),d(Math.floor(Math.random()*Object.keys(c).length)),f(e=>e+1),m(a)):(y(!0),l(!1),m("Вы ответили неправильно.")),_(!0)}else y(!0),l(!1),m("Вы ответили неправильно."),_(!0)}catch(e){console.error("Error checking city:",e)}};return(0,a.jsxs)("div",{className:x().main,children:[(0,a.jsx)("h1",{children:"Какой это город?"}),(0,a.jsxs)("div",{className:x().controls,children:[(0,a.jsxs)("div",{className:x().controls_con,children:[(0,a.jsx)("input",{id:"city",type:"text",value:e,onChange:e=>t(e.target.value)}),(0,a.jsx)("button",{id:"btn",onClick:g,children:"Проверить"})]}),(0,a.jsx)("div",{className:x().controls_con,children:(0,a.jsxs)("h2",{children:["Монетки ",p," "]})})]}),(0,a.jsx)("div",{className:x().wind,children:(0,a.jsx)(j,{currentIndex:i,pointsData:c})}),u&&(0,a.jsx)("div",{className:x().modal,children:(0,a.jsxs)("div",{className:x().modalContent,children:[(0,a.jsx)("span",{className:x().close,onClick:()=>_(!1),children:"\xd7"}),(0,a.jsx)("p",{children:n}),(0,a.jsx)("p",{children:h}),b&&(0,a.jsx)("button",{className:x().btn,onClick:()=>{t(""),l(""),d(0),f(0),_(!1),y(!1)},children:"Начать сначала"})]})})]})}},1309:function(e){e.exports={main:"layout_main__ABI2k",controls:"layout_controls__t7OOe",wind:"layout_wind__Ef2He",controls_con:"layout_controls_con__BnhHV",btn:"layout_btn__BmkTb",modal:"layout_modal__S9dz8",modalContent:"layout_modalContent__au_KZ",close:"layout_close__zD_TU"}}},function(e){e.O(0,[481,494,971,472,744],function(){return e(e.s=4170)}),_N_E=e.O()}]);