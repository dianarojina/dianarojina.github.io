(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[421],{4404:function(e,t,n){Promise.resolve().then(n.bind(n,5098))},8695:function(e,t,n){"use strict";n.r(t),n.d(t,{UserContext:function(){return o},UserProvider:function(){return l}});var s=n(7437),a=n(2265);let o=(0,a.createContext)({userLogin:null,setUserLogin:()=>{}}),l=e=>{let{children:t}=e,[n,l]=(0,a.useState)(null);return(0,s.jsx)(o.Provider,{value:{userLogin:n,setUserLogin:l},children:t})}},1708:function(e,t,n){"use strict";n.d(t,{F:function(){return v}});var s=n(994),a=n(2307),o=n(7007),l=n(2601);let r=l.env.API_KEY_DB,c=l.env.AUTH_DOMAIN,i=l.env.PROJ_ID,u=l.env.STOR_BUCKET,d=l.env.APP_ID,_=l.env.DB_URL,h=(0,s.ZF)({apiKey:r,databaseURL:_,authDomain:c,projectId:i,storageBucket:u,messagingSenderId:"764142243987",appId:d,measurementId:"G-XGXB7RDJR2"}),v=(0,a.N8)(h);(0,o.v0)(h)},5098:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var s=n(7437),a=n(2265),o=n(4033),l=n(2307),r=n(1708),c=e=>{let{currentIndex:t,pointsData:n}=e,[o,l]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(null!==t&&t>=0&&n&&Object.values(n)[t]){let{lat:e,lng:s}=Object.values(n)[t];l({lat:e,lng:s})}},[t,n]),(0,a.useEffect)(()=>{o&&new google.maps.StreetViewPanorama(document.getElementById("pano"),{position:o,pov:{heading:34,pitch:10},addressControl:!1,fullscreenControl:!1,showRoadLabels:!1})},[o]),(0,s.jsx)("div",{id:"pano",style:{height:"700px",width:"85%",margin:"10px",border:"1px"}})},i=n(1515),u=n.n(i),d=n(8695),_=()=>{let[e,t]=(0,a.useState)(""),[n,i]=(0,a.useState)(""),[_,h]=(0,a.useState)({}),[v,m]=(0,a.useState)(0),[x,j]=(0,a.useState)(!1),[p,f]=(0,a.useState)(""),[y,b]=(0,a.useState)(0),[C,g]=(0,a.useState)(!1),N=(0,o.useRouter)(),{userLogin:w,setUserLogin:S}=(0,a.useContext)(d.UserContext),k=async()=>{try{var e;let t=(0,l.iH)(r.F,"users/".concat(w)),n=await (0,l.U2)(t),s=(null===(e=n.val())||void 0===e?void 0:e.score)||0;y>s&&await (0,l.Vx)(t,{score:y+1})}catch(e){console.error("Error updating user score:",e)}};(0,a.useEffect)(()=>{let e=async()=>{try{let e=(0,l.iH)(r.F,"points"),t=await (0,l.U2)(e);t.exists()?h(t.val()):console.log("No data available")}catch(e){console.error("Error fetching points data:",e)}};e()},[]);let E=async()=>{try{let t=Object.keys(_).find(t=>t.toLowerCase().includes(e.toLowerCase()));if(t){let{lat:e,lng:n,text:s}=_[t];e===Object.values(_)[v].lat&&n===Object.values(_)[v].lng?(i("Правильно, это ".concat(t,"!")),m(Math.floor(Math.random()*Object.keys(_).length)),b(e=>e+1),f(s),j(!0),await k()):(g(!0),i(!1),f("Вы ответили неправильно."),j(!0))}else g(!0),i(!1),f("Вы ответили неправильно."),j(!0)}catch(e){console.error("Error checking city:",e)}};return(0,s.jsxs)("div",{className:u().main,children:[(0,s.jsx)("h1",{children:"Какой это город?"}),(0,s.jsxs)("div",{className:u().controls,children:[(0,s.jsxs)("div",{className:u().controls_con,children:[(0,s.jsx)("input",{id:"city",type:"text",value:e,onChange:e=>t(e.target.value)}),(0,s.jsx)("button",{className:u().btn,onClick:E,children:"Проверить"})]}),(0,s.jsx)("div",{className:u().controls_con,children:(0,s.jsxs)("h2",{children:[w," у тебя ",y," монет"]})}),(0,s.jsxs)("div",{className:u().controls_con,children:[(0,s.jsx)("button",{className:u().btn,onClick:()=>N.push("/Leaderboard"),children:"Лидерборд"}),(0,s.jsx)("button",{className:u().btn,onClick:()=>{S(null),N.push("/")},children:"Выйти"})]})]}),(0,s.jsx)("div",{className:u().wind,children:(0,s.jsx)(c,{currentIndex:v,pointsData:_})}),x&&(0,s.jsx)("div",{className:u().modal,children:(0,s.jsxs)("div",{className:u().modalContent,children:[(0,s.jsx)("span",{className:u().close,onClick:()=>j(!1),children:"\xd7"}),(0,s.jsx)("p",{children:n}),(0,s.jsx)("p",{children:p}),C&&(0,s.jsx)("button",{className:u().btn,onClick:()=>{t(""),i(""),m(0),b(0),setScoreL(0*scoreL),j(!1),g(!1)},children:"Начать сначала"})]})})]})}},1515:function(e){e.exports={mainBody:"layout_mainBody__ijhtq",main:"layout_main__IC0zG",controls:"layout_controls__5LBTd",wind:"layout_wind__3pD2U",controls_con:"layout_controls_con__18B31",btn:"layout_btn__iEhLx",modal:"layout_modal___0i5r",modalContent:"layout_modalContent__IelnC",close:"layout_close__uhMfo"}}},function(e){e.O(0,[481,898,494,971,472,744],function(){return e(e.s=4404)}),_N_E=e.O()}]);